<nb-card>
  <nb-card-header>
    NEC Report
  </nb-card-header>
  <nb-card-body id="reportForm">
    <form class="form" [formGroup]="form" (ngSubmit)="onSubmit()">
      <div class="row">
        <div class="row col-md-3">
          <div class="col">
            <label for="subject">Start Date:</label><span style="color: red;">*</span><br>
            <input fullWidth nbInput formControlName="startDate" placeholder="Start Date" [nbDatepicker]="picker1">
            <nb-datepicker #picker1 [max]="max" (dateChange)="setMin($event)"></nb-datepicker>
          </div>
          <div class="col">
            <label for="subject">End Date:</label><span style="color: red;">*</span><br>
            <input fullWidth nbInput formControlName="endDate" placeholder="End Date" [nbDatepicker]="picker2">
            <nb-datepicker #picker2 [max]="max" [min]="min"></nb-datepicker>
          </div>
        </div>
        <!-- <div class="col-md-2">
          <label class="text-label" for="text">Type :</label><br>
          <nb-select fullWidth formControlName="type" placeholder="Select Type">
            <nb-option value="Bulk">BULK </nb-option>
            <nb-option value="Single">SINGLE </nb-option>
          </nb-select>
        </div> -->
        <div *ngIf="this.showBank" class="col-md-3">
          <label class="text-label" for="text">Bank:</label><br>
          <nb-select fullWidth formControlName="destBank" placeholder="Select Bank"
            (selectedChange)="selectBank($event)">
            <nb-option *ngFor="let i of this.bankList" [value]="i.code">
              {{ i.name }}
            </nb-option>
          </nb-select>
        </div>
        <br>
        <div *ngIf="this.showInstitution" class="col-md-3">
          <label class="text-label" for="text">Corporate:</label><br>
          <nb-select fullWidth formControlName="code" placeholder="Select Corporate">
            <nb-option *ngFor="let i of this.institutions" [value]="i.code">
              {{ i.name }}
            </nb-option>
          </nb-select>
        </div>
        <div class="col-md-2">
          <label class="text-label" for="text">&nbsp;</label><br>
          <button fullWidth nbButton outline type="submit" status="primary" shape="round" [nbSpinner]="loading"
            nbSpinnerStatus="danger" [disabled]="loading || !form.valid">
            Submit
          </button>
        </div>
      </div>
      <div class="row">
        <div class="col-md-2">
          <label class="text-label" for="text">&nbsp;</label><br>
          <button fullWidth nbButton type="button" [disabled]="!this.response || this.response.length == 0"
            status="primary" shape="semi-round" (click)="downloadAsCSV()">
            Download CSV
          </button>
        </div>
        <!-- <div class="col-md-2">
          <label class="text-label" for="text">&nbsp;</label><br>
          <button fullWidth nbButton type="button" [disabled]="!this.response || this.response.length == 0"
            status="primary" shape="semi-round" (click)="downloadAsPDF()">
            Download PDF
          </button>
        </div> -->
      </div>
      <!-- <br>
        <div class="col-md-2">
          <button  fullWidth nbButton type="submit" status="primary" (click)="onSubmit()" shape="semi-round">
            Submit
          </button>
        </div> -->
    </form>
  </nb-card-body>
  <nb-card-body>
    <div>
      <ng2-smart-table [settings]="settings" [source]="source" (deleteConfirm)="onDeleteConfirm($event)"
        (edit)="onEditRowSelect($event)" style="margin-left: 20px !important">
      </ng2-smart-table>
    </div>
  </nb-card-body>
</nb-card>